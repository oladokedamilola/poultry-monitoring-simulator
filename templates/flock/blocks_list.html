    {% extends "dashboard_base.html" %}
    {% load static %}
    {% block title %}My Flock Blocks{% endblock %}

    {% block content %}
    <div class="container-wide py-4">
        
        <!-- Page Header -->
        <div class="flock-header mb-5">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <div>
                    <h1 style="color:var(--pg-forest-green)" class="mb-1">My Flock Blocks</h1>
                    <p class="pg-muted mb-0">Manage and monitor all your poultry blocks from one place</p>
                </div>
                <div class="header-actions">
                    <a href="{% url 'flock:create' %}" 
                    class="pg-btn pg-btn-primary {% if blocks|length >= 10 %}disabled{% endif %}">
                        <i class="fas fa-plus me-2"></i>Create Block
                    </a>
                </div>
            </div>
            
            <!-- Quick Stats -->
            <div class="flock-stats mb-4">
                <div class="row g-3">
                    <div class="col-6 col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-layer-group"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value">{{ blocks|length }}</div>
                                <div class="stat-label">Total Blocks</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-dove"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value">{{ total_birds|default:"0" }}</div>
                                <div class="stat-label">Total Birds</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-play-circle"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value">{{ active_simulations|default:"0" }}</div>
                                <div class="stat-label">Active Sims</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value">{{ data_points|default:"0" }}</div>
                                <div class="stat-label">Data Points</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {% if blocks %}
            <!-- Blocks Grid -->
            <div class="flock-grid mb-5">
                <div class="grid-header mb-4">
                    <h4>Your Poultry Blocks</h4>
                    <div class="view-controls">
                        <button class="view-btn active" data-view="grid">
                            <i class="fas fa-th"></i>
                        </button>
                        <button class="view-btn" data-view="list">
                            <i class="fas fa-list"></i>
                        </button>
                    </div>
                </div>

                <!-- Grid View -->
                <div class="blocks-grid" id="gridView">
                    <div class="row g-4">
                        {% for block in blocks %}
                        <div class="col-xl-4 col-lg-6">
                            <div class="flock-block-card">
                                <!-- Block Header -->
                                <div class="block-header">
                                    <div class="block-icon">
                                        <i class="fas fa-kiwi-bird"></i>
                                    </div>
                                    <div class="block-info">
                                        <h4 class="block-name">{{ block.name }}</h4>
                                        <div class="block-status">
                                            {% if block.is_running %}
                                            <span class="status-dot running"></span>
                                            <span class="status-text">Simulation Active</span>
                                            {% else %}
                                            <span class="status-dot"></span>
                                            <span class="status-text">Ready</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>

                                <!-- Block Details -->
                                <div class="block-details">
                                    <div class="detail-item">
                                        <div class="detail-label">
                                            <i class="fas fa-dove"></i>
                                            <span>Birds</span>
                                        </div>
                                        <div class="detail-value">{{ block.number_of_birds }}</div>
                                    </div>
                                    
                                    <div class="detail-item">
                                        <div class="detail-label">
                                            <i class="fas fa-dna"></i>
                                            <span>Breed</span>
                                        </div>
                                        <div class="detail-value">{{ block.get_breed_display }}</div>
                                    </div>
                                    
                                    <div class="detail-item">
                                        <div class="detail-label">
                                            <i class="fas fa-calendar-alt"></i>
                                            <span>Age Group</span>
                                        </div>
                                        <div class="detail-value">{{ block.get_age_group_display }}</div>
                                    </div>
                                    
                                    <div class="detail-item">
                                        <div class="detail-label">
                                            <i class="fas fa-clock"></i>
                                            <span>Created</span>
                                        </div>
                                        <div class="detail-value">{{ block.created_at|date:"M d, Y" }}</div>
                                    </div>
                                </div>

                                <!-- Quick Actions -->
                                <div class="quick-actions">
                                    {% if block.is_running %}
                                    <a href="{% url 'live' block.id %}" class="action-btn primary">
                                        <i class="fas fa-tachometer-alt me-1"></i>Live View
                                    </a>
                                    <a href="{% url 'stop_sim' block.id %}" class="action-btn secondary">
                                        <i class="fas fa-stop me-1"></i>Stop
                                    </a>
                                    {% else %}
                                    <a href="{% url 'start_sim' block.id %}" class="action-btn primary">
                                        <i class="fas fa-play me-1"></i>Start Sim
                                    </a>
                                    <a href="{% url 'flock:detail' block.id %}" class="action-btn secondary">
                                        <i class="fas fa-eye me-1"></i>View
                                    </a>
                                    {% endif %}
                                </div>

                                <!-- More Options -->
                                <div class="more-options">
                                    <div class="dropdown">
                                        <button class="options-toggle" type="button" data-bs-toggle="dropdown">
                                            <i class="fas fa-ellipsis-h"></i>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-end">
                                            <li>
                                                <a class="dropdown-item" href="{% url 'flock:detail' block.id %}">
                                                    <i class="fas fa-eye me-2"></i>View Details
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="{% url 'flock:update' block.id %}">
                                                    <i class="fas fa-edit me-2"></i>Edit Block
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="{% url 'history_detail' block.id %}">
                                                    <i class="fas fa-history me-2"></i>View History
                                                </a>
                                            </li>
                                            <li><hr class="dropdown-divider"></li>
                                            <li>
                                                <a class="dropdown-item text-danger" href="#" onclick="confirmDelete({{ block.id }})">
                                                    <i class="fas fa-trash me-2"></i>Delete Block
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- List View -->
                <div class="blocks-list" id="listView" style="display: none;">
                    <div class="list-container">
                        {% for block in blocks %}
                        <div class="flock-list-item">
                            <div class="list-item-header">
                                <div class="list-item-main">
                                    <div class="list-icon">
                                        <i class="fas fa-kiwi-bird"></i>
                                    </div>
                                    <div class="list-content">
                                        <h5 class="list-title">{{ block.name }}</h5>
                                        <div class="list-subtitle">
                                            <span class="me-3">
                                                <i class="fas fa-dove me-1"></i>{{ block.number_of_birds }} birds
                                            </span>
                                            <span class="me-3">
                                                <i class="fas fa-dna me-1"></i>{{ block.get_breed_display }}
                                            </span>
                                            <span>
                                                <i class="fas fa-calendar-alt me-1"></i>{{ block.get_age_group_display }}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="list-actions">
                                    {% if block.is_running %}
                                    <span class="status-badge running">
                                        <i class="fas fa-circle me-1"></i>Active
                                    </span>
                                    {% else %}
                                    <span class="status-badge">
                                        <i class="fas fa-circle me-1"></i>Ready
                                    </span>
                                    {% endif %}
                                    <div class="action-buttons">
                                        {% if block.is_running %}
                                        <a href="{% url 'live' block.id %}" class="btn-action">
                                            <i class="fas fa-tachometer-alt"></i>
                                        </a>
                                        {% else %}
                                        <a href="{% url 'start_sim' block.id %}" class="btn-action">
                                            <i class="fas fa-play"></i>
                                        </a>
                                        {% endif %}
                                        <a href="{% url 'flock:detail' block.id %}" class="btn-action">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Quick Tips -->
            <div class="quick-tips mb-5">
                <div class="pg-card">
                    <div class="card-title">
                        <i class="fas fa-lightbulb me-2" style="color:var(--pg-warm-yellow)"></i>
                        Flock Management Tips
                    </div>
                    <div class="row g-4">
                        <div class="col-md-4">
                            <div class="tip-item">
                                <div class="tip-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <h6>Group Similar Birds</h6>
                                <p class="pg-muted">Create separate blocks for different age groups or breeds for better monitoring.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="tip-item">
                                <div class="tip-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <h6>Monitor Trends</h6>
                                <p class="pg-muted">Regularly check historical data to identify patterns and optimize conditions.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="tip-item">
                                <div class="tip-icon">
                                    <i class="fas fa-bell"></i>
                                </div>
                                <h6>Set Up Alerts</h6>
                                <p class="pg-muted">Configure threshold alerts for each block to stay informed about critical changes.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        {% else %}
            <!-- Empty State -->
            <div class="empty-flock-state">
                <div class="empty-content text-center py-5">
                    <div class="empty-illustration mb-4">
                        <i class="fas fa-kiwi-bird"></i>
                    </div>
                    <h3 class="mb-3" style="color:var(--pg-forest-green)">No Flock Blocks Yet</h3>
                    <p class="pg-muted mb-4">Create your first poultry block to start monitoring and simulation</p>
                    
                    <div class="empty-actions mb-5">
                        <a href="{% url 'flock:create' %}" class="pg-btn pg-btn-primary btn-lg">
                            <i class="fas fa-plus me-2"></i>Create Your First Block
                        </a>
                    </div>

                    <!-- Getting Started Guide -->
                    <div class="getting-started-guide">
                        <h5 class="mb-4">How to Get Started</h5>
                        
                        <div class="guide-steps">
                            <div class="guide-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h6>Create a Flock Block</h6>
                                    <p>Define your poultry group with name, breed, age, and number of birds.</p>
                                </div>
                            </div>
                            
                            <div class="guide-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h6>Start Simulation</h6>
                                    <p>Launch virtual sensors to generate realistic monitoring data for your block.</p>
                                </div>
                            </div>
                            
                            <div class="guide-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h6>Monitor & Analyze</h6>
                                    <p>Track environmental conditions and bird activity in real-time.</p>
                                </div>
                            </div>
                            
                            <div class="guide-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h6>Review History</h6>
                                    <p>Analyze historical data to optimize poultry management practices.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Example Blocks -->
                    <div class="example-blocks mt-5">
                        <h5 class="mb-4">Example Block Setups</h5>
                        
                        <div class="row g-4">
                            <div class="col-md-4">
                                <div class="example-card">
                                    <div class="example-icon">
                                        <i class="fas fa-egg"></i>
                                    </div>
                                    <h6>Broiler Production</h6>
                                    <p class="pg-muted">Monitor meat-producing chickens with focus on growth metrics and feed efficiency.</p>
                                </div>
                            </div>
                            
                            <div class="col-md-4">
                                <div class="example-card">
                                    <div class="example-icon">
                                        <i class="fas fa-egg"></i>
                                    </div>
                                    <h6>Layer Hens</h6>
                                    <p class="pg-muted">Track egg-laying hens with emphasis on calcium levels and nesting conditions.</p>
                                </div>
                            </div>
                            
                            <div class="col-md-4">
                                <div class="example-card">
                                    <div class="example-icon">
                                        <i class="fas fa-feather-alt"></i>
                                    </div>
                                    <h6>Breeder Stock</h6>
                                    <p class="pg-muted">Monitor breeding birds with focus on reproductive health and genetic tracking.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}

    </div>

    <style>
        /* Flock Overview Styles */
        .flock-header {
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(27,94,32,0.08);
        }

        /* Stats Cards */
        .stat-card {
            background: var(--pg-surface);
            border: 1px solid rgba(27,94,32,0.05);
            border-radius: var(--pg-radius);
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            height: 100%;
            transition: all 0.2s var(--pg-ease);
        }

        .stat-card:hover {
            border-color: rgba(27,94,32,0.1);
            transform: translateY(-2px);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            background: rgba(27,94,32,0.08);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--pg-forest-green);
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .stat-content {
            flex: 1;
        }

        .stat-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--pg-forest-green);
            line-height: 1;
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--pg-text-tertiary);
        }

        /* Grid Header */
        .grid-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .view-controls {
            display: flex;
            gap: 0.25rem;
            background: rgba(27,94,32,0.05);
            padding: 0.25rem;
            border-radius: var(--pg-radius);
        }

        .view-btn {
            background: transparent;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--pg-text-tertiary);
            cursor: pointer;
            transition: all 0.2s var(--pg-ease);
        }

        .view-btn:hover {
            color: var(--pg-forest-green);
        }

        .view-btn.active {
            background: var(--pg-surface);
            color: var(--pg-forest-green);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        /* Flock Block Cards */
        .flock-block-card {
            background: var(--pg-surface);
            border: 1px solid rgba(27,94,32,0.05);
            border-radius: var(--pg-radius);
            padding: 1.5rem;
            height: 100%;
            transition: all 0.3s var(--pg-ease);
            position: relative;
        }

        .flock-block-card:hover {
            border-color: rgba(27,94,32,0.15);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(27,94,32,0.08);
        }

        .block-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .block-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(27,94,32,0.1) 0%, rgba(27,94,32,0.05) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--pg-forest-green);
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .block-info {
            flex: 1;
        }

        .block-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--pg-text-primary);
            margin-bottom: 0.25rem;
            line-height: 1.3;
        }

        .block-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--pg-cool-gray);
            border-radius: 50%;
        }

        .status-dot.running {
            background: var(--pg-success);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .status-text {
            font-size: 0.85rem;
            color: var(--pg-text-tertiary);
        }

        /* Block Details */
        .block-details {
            margin-bottom: 1.5rem;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(27,94,32,0.03);
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--pg-text-secondary);
            font-size: 0.9rem;
        }

        .detail-label i {
            color: var(--pg-forest-green);
            width: 16px;
        }

        .detail-value {
            font-weight: 600;
            color: var(--pg-text-primary);
            font-size: 0.95rem;
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .action-btn {
            flex: 1;
            padding: 0.625rem;
            border-radius: var(--pg-radius);
            text-align: center;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.2s var(--pg-ease);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .action-btn.primary {
            background: linear-gradient(135deg, var(--pg-forest-green) 0%, #1a511f 100%);
            color: white;
        }

        .action-btn.secondary {
            background: transparent;
            border: 1px solid rgba(27,94,32,0.1);
            color: var(--pg-text-secondary);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(27,94,32,0.15);
            color: white;
        }

        .action-btn.secondary:hover {
            border-color: var(--pg-forest-green);
            color: var(--pg-forest-green);
        }

        /* More Options */
        .more-options {
            position: absolute;
            top: 1rem;
            right: 1rem;
        }

        .options-toggle {
            background: transparent;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--pg-text-tertiary);
            cursor: pointer;
            transition: all 0.2s var(--pg-ease);
        }

        .options-toggle:hover {
            background: rgba(27,94,32,0.05);
            color: var(--pg-forest-green);
        }

        /* List View */
        .flock-list-item {
            background: var(--pg-surface);
            border: 1px solid rgba(27,94,32,0.05);
            border-radius: var(--pg-radius);
            padding: 1rem;
            margin-bottom: 0.5rem;
            transition: all 0.2s var(--pg-ease);
        }

        .flock-list-item:hover {
            border-color: rgba(27,94,32,0.1);
            transform: translateX(5px);
        }

        .list-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .list-item-main {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
        }

        .list-icon {
            width: 40px;
            height: 40px;
            background: rgba(27,94,32,0.08);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--pg-forest-green);
            font-size: 1rem;
            flex-shrink: 0;
        }

        .list-content {
            flex: 1;
        }

        .list-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--pg-text-primary);
            margin-bottom: 0.25rem;
        }

        .list-subtitle {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .list-subtitle span {
            font-size: 0.85rem;
            color: var(--pg-text-tertiary);
            display: flex;
            align-items: center;
        }

        .list-subtitle i {
            margin-right: 0.25rem;
        }

        .list-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            background: rgba(27,94,32,0.08);
            color: var(--pg-forest-green);
            border-radius: 999px;
            font-size: 0.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
        }

        .status-badge.running {
            background: rgba(46,125,50,0.1);
            color: var(--pg-success);
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .btn-action {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: rgba(27,94,32,0.05);
            color: var(--pg-text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: all 0.2s var(--pg-ease);
        }

        .btn-action:hover {
            background: var(--pg-forest-green);
            color: white;
            transform: translateY(-2px);
        }

        /* Quick Tips */
        .tip-item {
            text-align: center;
            padding: 1rem;
        }

        .tip-icon {
            font-size: 2rem;
            color: var(--pg-forest-green);
            margin-bottom: 1rem;
            width: 60px;
            height: 60px;
            background: rgba(27,94,32,0.08);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
        }

        .tip-item h6 {
            font-size: 1rem;
            color: var(--pg-text-primary);
            margin-bottom: 0.5rem;
        }

        .tip-item p {
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 0;
        }

        /* Empty State */
        .empty-flock-state {
            max-width: 1000px;
            margin: 0 auto;
        }

        .empty-illustration {
            font-size: 5rem;
            color: rgba(27,94,32,0.2);
            margin-bottom: 2rem;
        }

        .empty-actions {
            margin-bottom: 3rem;
        }

        /* Getting Started Guide */
        .getting-started-guide {
            background: rgba(27,94,32,0.03);
            border-radius: var(--pg-radius);
            padding: 2rem;
            margin: 2rem 0;
        }

        .guide-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .guide-step {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .guide-step .step-number {
            width: 40px;
            height: 40px;
            background: rgba(27,94,32,0.1);
            color: var(--pg-forest-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .guide-step .step-content h6 {
            font-size: 1rem;
            color: var(--pg-text-primary);
            margin-bottom: 0.25rem;
        }

        .guide-step .step-content p {
            font-size: 0.9rem;
            color: var(--pg-text-tertiary);
            margin: 0;
            line-height: 1.5;
        }

        /* Example Blocks */
        .example-card {
            text-align: center;
            padding: 1.5rem;
            background: var(--pg-surface);
            border: 1px solid rgba(27,94,32,0.05);
            border-radius: var(--pg-radius);
            height: 100%;
            transition: all 0.3s var(--pg-ease);
        }

        .example-card:hover {
            border-color: rgba(27,94,32,0.1);
            transform: translateY(-5px);
        }

        .example-icon {
            font-size: 2rem;
            color: var(--pg-forest-green);
            margin-bottom: 1rem;
            width: 60px;
            height: 60px;
            background: rgba(27,94,32,0.08);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
        }

        .example-card h6 {
            font-size: 1.1rem;
            color: var(--pg-text-primary);
            margin-bottom: 0.5rem;
        }

        .example-card p {
            font-size: 0.9rem;
            color: var(--pg-text-tertiary);
            line-height: 1.5;
            margin: 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .flock-header .d-flex {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .header-actions {
                width: 100%;
            }

            .header-actions .pg-btn {
                width: 100%;
            }

            .stat-card {
                flex-direction: column;
                text-align: center;
                gap: 0.5rem;
            }

            .stat-icon {
                margin: 0 auto;
            }

            .grid-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .view-controls {
                align-self: flex-end;
            }

            .block-header {
                flex-direction: column;
                text-align: center;
                gap: 0.75rem;
            }

            .block-icon {
                margin: 0 auto;
            }

            .quick-actions {
                flex-direction: column;
            }

            .list-item-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .list-actions {
                width: 100%;
                justify-content: space-between;
            }

            .getting-started-guide {
                padding: 1.5rem;
            }

            .guide-steps {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 576px) {
            .stat-value {
                font-size: 1.5rem;
            }

            .block-details {
                font-size: 0.9rem;
            }

            .detail-item {
                padding: 0.5rem 0;
            }

            .empty-illustration {
                font-size: 4rem;
            }

            .example-blocks .row {
                gap: 1rem;
            }
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // View toggle functionality
            const viewButtons = document.querySelectorAll('.view-btn');
            const gridView = document.getElementById('gridView');
            const listView = document.getElementById('listView');

            viewButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const view = this.dataset.view;
                    
                    viewButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    if (view === 'grid') {
                        gridView.style.display = 'block';
                        listView.style.display = 'none';
                    } else {
                        gridView.style.display = 'none';
                        listView.style.display = 'block';
                    }
                });
            });

            // Auto-switch to list view on mobile
            function handleMobileView() {
                if (window.innerWidth <= 768 && viewButtons.length > 0) {
                    const listBtn = document.querySelector('[data-view="list"]');
                    if (listBtn && !listBtn.classList.contains('active')) {
                        listBtn.click();
                    }
                }
            }

            // Initial mobile check
            handleMobileView();
            
            // Update on resize
            let resizeTimeout;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(handleMobileView, 250);
            });

            // Delete confirmation
            window.confirmDelete = function(blockId) {
                if (confirm('Are you sure you want to delete this flock block? All associated data will be lost.')) {
                    // Implement delete functionality
                    fetch(`/flock/delete/${blockId}/`, {
                        method: 'POST',
                        headers: {
                            'X-CSRFToken': getCookie('csrftoken'),
                            'Content-Type': 'application/json',
                        },
                    })
                    .then(response => {
                        if (response.ok) {
                            window.location.reload();
                        }
                    });
                }
            };

            // Helper function to get CSRF token
            function getCookie(name) {
                let cookieValue = null;
                if (document.cookie && document.cookie !== '') {
                    const cookies = document.cookie.split(';');
                    for (let i = 0; i < cookies.length; i++) {
                        const cookie = cookies[i].trim();
                        if (cookie.substring(0, name.length + 1) === (name + '=')) {
                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                            break;
                        }
                    }
                }
                return cookieValue;
            }
        });
    </script>
    {% endblock %}